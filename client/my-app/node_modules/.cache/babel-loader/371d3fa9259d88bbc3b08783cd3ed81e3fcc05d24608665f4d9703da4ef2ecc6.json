{"ast":null,"code":"const io = require(\"socket.io\")(4000);\nlet players = [];\nio.on(\"connection\", socket => {\n  console.log(\"New connection:\", socket.id);\n  socket.on(\"joinGame\", name => {\n    const player = {\n      id: socket.id,\n      name: name\n    };\n    players.push(player);\n    if (players.length % 2 === 0) {\n      const player1 = players[players.length - 2];\n      const player2 = players[players.length - 1];\n      io.to(player1.id).emit(\"opponentFound\", player2);\n      io.to(player2.id).emit(\"opponentFound\", player1);\n    }\n  });\n  socket.on(\"makeChoice\", data => {\n    const player = players.find(p => p.id === socket.id);\n    player.choice = data.choice;\n    const opponent = players.find(p => p.id !== socket.id);\n    if (opponent.choice) {\n      const result = calculateResult(player, opponent);\n      io.to(player.id).emit(\"gameResult\", {\n        result: result\n      });\n      io.to(opponent.id).emit(\"gameResult\", {\n        result: result\n      });\n    } else {\n      io.to(player.id).emit(\"choiceMade\", data);\n    }\n  });\n  socket.on(\"resetGame\", () => {\n    players.forEach(p => {\n      delete p.choice;\n    });\n    io.emit(\"gameReset\");\n  });\n  socket.on(\"disconnect\", () => {\n    console.log(\"Disconnected:\", socket.id);\n    players = players.filter(p => p.id !== socket.id);\n  });\n});\nfunction calculateResult(player1, player2) {\n  if (player1.choice === player2.choice) {\n    return \"Tie\";\n  } else if (player1.choice === \"rock\" && player2.choice === \"scissors\" || player1.choice === \"paper\" && player2.choice === \"rock\" || player1.choice === \"scissors\" && player2.choice === \"paper\") {\n    return `${player1.name} wins!`;\n  } else {\n    return `${player2.name} wins!`;\n  }\n}\nexport default calculateResult;","map":{"version":3,"names":["io","require","players","on","socket","console","log","id","name","player","push","length","player1","player2","to","emit","data","find","p","choice","opponent","result","calculateResult","forEach","filter"],"sources":["C:/Users/ayush/Downloads/Socket Demo App/Socket Demo App/client/my-app/src/calculateResult.js"],"sourcesContent":["const io = require(\"socket.io\")(4000);\r\n\r\nlet players = [];\r\n\r\nio.on(\"connection\", (socket) => {\r\n  console.log(\"New connection:\", socket.id);\r\n\r\n  socket.on(\"joinGame\", (name) => {\r\n    const player = { id: socket.id, name: name };\r\n    players.push(player);\r\n\r\n    if (players.length % 2 === 0) {\r\n      const player1 = players[players.length - 2];\r\n      const player2 = players[players.length - 1];\r\n      io.to(player1.id).emit(\"opponentFound\", player2);\r\n      io.to(player2.id).emit(\"opponentFound\", player1);\r\n    }\r\n  });\r\n\r\n  socket.on(\"makeChoice\", (data) => {\r\n    const player = players.find((p) => p.id === socket.id);\r\n    player.choice = data.choice;\r\n\r\n    const opponent = players.find((p) => p.id !== socket.id);\r\n    if (opponent.choice) {\r\n      const result = calculateResult(player, opponent);\r\n      io.to(player.id).emit(\"gameResult\", { result: result });\r\n      io.to(opponent.id).emit(\"gameResult\", { result: result });\r\n    } else {\r\n      io.to(player.id).emit(\"choiceMade\", data);\r\n    }\r\n  });\r\n\r\n  socket.on(\"resetGame\", () => {\r\n    players.forEach((p) => {\r\n      delete p.choice;\r\n    });\r\n    io.emit(\"gameReset\");\r\n  });\r\n\r\n  socket.on(\"disconnect\", () => {\r\n    console.log(\"Disconnected:\", socket.id);\r\n    players = players.filter((p) => p.id !== socket.id);\r\n  });\r\n});\r\n\r\nfunction calculateResult(player1, player2) {\r\n  if (player1.choice === player2.choice) {\r\n    return \"Tie\";\r\n  } else if (\r\n    (player1.choice === \"rock\" && player2.choice === \"scissors\") ||\r\n    (player1.choice === \"paper\" && player2.choice === \"rock\") ||\r\n    (player1.choice === \"scissors\" && player2.choice === \"paper\")\r\n  ) {\r\n    return `${player1.name} wins!`;\r\n  } else {\r\n    return `${player2.name} wins!`;\r\n  }\r\n}\r\n\r\nexport default calculateResult;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}